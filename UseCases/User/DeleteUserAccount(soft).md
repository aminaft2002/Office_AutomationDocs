

**حذف نرم حساب کاربری – بدون پاک‌کردن نهایی از دیتابیس)**

|ویژگی|توضیح|
|---|---|
|**هدف (Goal)**|غیرفعال‌سازی و پنهان‌کردن حساب کاربری از سیستم، بدون حذف دائمی اطلاعات|
|**نقش‌های مجاز (Actors)**|`Admin`, `HR Manager`|
|**پیش‌شرط‌ها (Preconditions)**||

- حساب کاربری موردنظر وجود داشته باشد
    
- نقش اجراکننده دارای دسترسی مدیریت کاربران باشد |  
    | **پس‌شرط‌ها (Postconditions)** |
    
- فیلد `IsDeleted` یا `IsActive` برای کاربر به `true` یا `false` تنظیم می‌شود
    
- اطلاعات کاربر در سیستم باقی می‌ماند ولی در لیست‌های عمومی نمایش داده نمی‌شود
    
- کاربر دیگر نمی‌تواند وارد سیستم شود |  
    | **سناریوی اصلی (Main Flow)** |
    

1. مدیر وارد بخش مدیریت کاربران می‌شود
    
2. کاربر موردنظر را انتخاب می‌کند
    
3. روی گزینه "حذف نرم" کلیک می‌کند
    
4. سیستم درخواست تأیید حذف نرم را نمایش می‌دهد
    
5. با تأیید نهایی، وضعیت کاربر به غیرفعال (soft-deleted) تغییر می‌کند
    
6. پیام موفقیت نمایش داده می‌شود |  
    | **استثناها (Exceptions)** |
    

- کاربر موردنظر یافت نشود
    
- حساب کاربر قبلاً حذف شده باشد
    
- خطای دیتابیس یا دسترسی ناکافی |  
    | **الزامات رابط کاربری (UI Requirements)** |
    
- گزینه "Soft Delete" در کنار پروفایل کاربر
    
- هشدار و پیام تأیید برای جلوگیری از حذف اشتباهی
    
- نمایش کاربر حذف‌شده به‌صورت خاکستری یا دارای برچسب "غیرفعال" در لیست مدیریت |  
    | **رویدادهای جانبی (Side Effects)** |
    
- ثبت حذف در `UserLog` یا `SystemAudit`
    
- بستن سشن‌های فعال
    
- لغو نوتیفیکیشن‌ها و وظایف فعال |  
    | **ملاحظات امنیتی (Security Notes)** |
    
- فقط مدیران با مجوز می‌توانند حذف انجام دهند
    
- حذف کاربران سیستمی یا ادمین‌های اصلی نیاز به تأیید مضاعف دارد |