
### Use Case: `ChangeUserPassword`

**(تغییر رمز عبور توسط کاربر احراز هویت‌شده)**

|ویژگی|توضیح|
|---|---|
|**هدف (Goal)**|امکان تغییر رمز عبور برای افزایش امنیت یا به‌روزرسانی شخصی|
|**نقش‌های مجاز (Actors)**||

- `User` (کاربر احراز هویت‌شده) |  
    | **پیش‌شرط‌ها (Preconditions)** |
    
- کاربر وارد حساب کاربری خود شده باشد (Authenticated Session)
    
- رمز عبور فعلی صحیح باشد |  
    | **پس‌شرط‌ها (Postconditions)** |
    
- رمز عبور جدید جایگزین رمز قبلی می‌شود
    
- نشست فعلی ممکن است معتبر باقی بماند یا به‌دلخواه مدیر منقضی شود
    
- لاگ ثبت می‌شود
    
- پیام تأیید ارسال می‌شود |
    

| **سناریو اصلی (Main Flow)** |

1. کاربر وارد تنظیمات حساب کاربری خود می‌شود
    
2. وارد بخش "تغییر رمز عبور" می‌شود
    
3. رمز عبور فعلی را وارد می‌کند
    
4. رمز عبور جدید را دو بار وارد می‌کند (با اعتبارسنجی مطابقت و امنیت)
    
5. سیستم رمز فعلی را تأیید می‌کند
    
6. رمز جدید هش شده و ذخیره می‌شود
    
7. پیام موفقیت نمایش داده شده و لاگ ثبت می‌شود
    

| **سناریو جایگزین (Alternate Flow)** |

- در صورت وارد کردن رمز فعلی اشتباه، عملیات متوقف می‌شود
    
- در صورت عدم تطابق رمز جدید و تکرار آن، هشدار نمایش داده می‌شود
    

| **استثناها (Exceptions)** |

- رمز فعلی اشتباه وارد شده
    
- رمز جدید ضعیف (کمتر از حداقل سطح امنیتی)
    
- خطا در ذخیره اطلاعات |
    

| **الزامات رابط کاربری (UI Requirements)** |

- فیلد رمز فعلی + رمز جدید + تکرار رمز جدید
    
- نشانگر قدرت رمز عبور
    
- پیام‌های خطا و موفقیت دقیق و واضح |
    

| **ملاحظات امنیتی (Security Notes)** |

- هش رمز جدید با الگوریتم امن (مانند bcrypt یا Argon2)
    
- احراز هویت مجدد در صورت گذشت مدت‌زمان طولانی از ورود
    
- ثبت زمان و IP تغییر رمز در لاگ
    
- گزینه "خروج از سایر دستگاه‌ها" در صورت نیاز
    
- اعمال محدودیت تعداد تلاش برای رمز فعلی (مثلاً ۵ بار) برای جلوگیری از حمله brute force |