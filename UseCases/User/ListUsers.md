
### 🧾 Use Case: `ListUsers`

**(مشاهده لیست کاربران با امکان جستجو، فیلتر، و مرتب‌سازی)**

|ویژگی|توضیح|
|---|---|
|**هدف (Goal)**|مشاهده فهرست کاربران برای مدیریت و انجام عملیات مدیریتی|
|**نقش‌های مجاز (Actors)**||

- `Admin`
    
- `UserManager`
    
- سایر نقش‌های دارای مجوز مشاهده کاربران |  
    | **پیش‌شرط‌ها (Preconditions)** |
    
- کاربر وارد سامانه شده باشد
    
- دارای دسترسی مشاهده کاربران (`ViewUsersPermission`) باشد |  
    | **پس‌شرط‌ها (Postconditions)** |
    
- لیست کاربران به همراه اطلاعات پایه آن‌ها نمایش داده می‌شود
    
- امکان جستجو، فیلتر، مرتب‌سازی و صفحه‌بندی وجود دارد |
    

---

### 🔁 جریان اصلی (Main Flow)

1. کاربر مجاز وارد پنل مدیریت کاربران می‌شود
    
2. سیستم لیست کاربران را با اطلاعات اولیه (نام، نقش، وضعیت، ایمیل) نمایش می‌دهد
    
3. کاربر می‌تواند:
    
    - جستجو بر اساس نام، ایمیل یا شماره پرسنلی
        
    - فیلتر بر اساس نقش یا وضعیت (فعال/غیرفعال)
        
    - مرتب‌سازی بر اساس تاریخ عضویت یا حروف الفبا
        
    - پیمایش بین صفحات
        
4. با کلیک روی هر کاربر، اطلاعات کامل یا پنل عملیات قابل دسترس خواهد بود
    

---

### 🔄 جریان جایگزین (Alternate Flows)

- در صورت خالی بودن لیست، پیام «هیچ کاربری یافت نشد» نمایش داده می‌شود
    
- اگر هیچ مجوزی برای مشاهده کاربران نداشته باشد، پیغام خطای دسترسی داده می‌شود
    

---

### ❗ استثناها (Exceptions)

- خطای پایگاه داده هنگام واکشی کاربران
    
- مشکل ارتباط با سرور
    
- داده‌های خراب یا ناقص در لیست (نمایش پیام خطا یا فیلتر)
    

---

### 📊 خروجی‌ها (Outputs)

- `UserId`
    
- `FullName`
    
- `Username` یا `Email`
    
- `Roles[]`
    
- `Status` (فعال/غیرفعال)
    
- `CreatedAt`
    
- عملیات مجاز برای هر ردیف (ویرایش، حذف، مدیریت نقش‌ها و…)
    

---

### 🔐 ملاحظات امنیتی

- نمایش فقط اطلاعاتی که با سطح دسترسی کاربر مجاز است
    
- پنهان‌سازی عملیات و دکمه‌ها برای نقش‌های فاقد مجوز
    
- صفحه‌بندی و لود تنبل (Lazy Load) برای جلوگیری از لو رفتن لیست کامل کاربران در سامانه‌های بزرگ