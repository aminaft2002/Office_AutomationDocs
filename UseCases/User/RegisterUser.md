### Use Case: `RegisterUser`

|ویژگی|توضیح|
|---|---|
|**هدف (Goal)**|ثبت یک کاربر جدید در سیستم توسط مدیر یا مسئول منابع انسانی|
|**نقش‌های مجاز (Actors)**|`Admin`, `HR Manager`|
|**پیش‌شرط‌ها (Preconditions)**|- نقش کاربر جاری باید دسترسی ایجاد کاربر جدید داشته باشد  <br>- اطلاعات پایه کاربر (ایمیل/نام/سمت/نقش) آماده باشد|
|**پس‌شرط‌ها (Postconditions)**|- کاربر جدید در سیستم ایجاد شده و یک نقش یا بیشتر به او اختصاص داده شده  <br>- در صورت نیاز، لینک فعال‌سازی برای او ارسال شده است|
|**سناریوی اصلی (Main Flow)**||

1. مدیر وارد بخش مدیریت کاربران می‌شود
    
2. روی گزینه "ایجاد کاربر جدید" کلیک می‌کند
    
3. فرم اطلاعات کاربر (نام، نام خانوادگی، ایمیل، موبایل، واحد سازمانی، نقش‌ها) نمایش داده می‌شود
    
4. اطلاعات وارد می‌شود و اعتبارسنجی انجام می‌گیرد
    
5. نقش‌ها به کاربر اختصاص داده می‌شود
    
6. با زدن دکمه ثبت، کاربر در پایگاه داده ذخیره می‌شود
    
7. یک ایمیل فعال‌سازی (یا رمز عبور اولیه) برای کاربر ارسال می‌گردد |  
    | **خطاها / استثناها (Exceptions)** |
    

- ایمیل تکراری است ⇒ نمایش خطا "کاربری با این ایمیل قبلاً ثبت شده است"
    
- اطلاعات اجباری وارد نشده‌اند ⇒ نمایش خطای فرم
    
- خطای ارسال ایمیل ⇒ هشدار "ایجاد شد اما ایمیل فعال‌سازی ارسال نشد" |  
    | **الزامات رابط کاربری (UI Requirements)** |
    
- فرم ثبت کاربر با اعتبارسنجی سمت کلاینت
    
- نمایش نقش‌های موجود در قالب DropDown یا MultiSelect
    
- نمایش پیغام موفقیت یا خطا به کاربر |  
    | **رویدادهای جانبی (Side Effects)** |
    
- ورود ثبت‌شده در audit trail به‌صورت: "User X created user Y"
    
- امکان تعیین وضعیت اولیه: فعال / غیرفعال / نیازمند تأیید |  
    | **ملاحظات امنیتی (Security Notes)** |
    
- فقط کاربران با نقش خاص مجاز به استفاده از این یوزکیس هستند
    
- داده‌های حساس (مثل شماره موبایل، ایمیل، رمز اولیه) باید رمزگذاری یا لاگ نشوند |