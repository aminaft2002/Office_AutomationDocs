
### Use Case: `ResetUserPassword`

**(بازنشانی رمز عبور کاربر توسط مدیر یا از طریق فراموشی رمز)**

|ویژگی|توضیح|
|---|---|
|**هدف (Goal)**|تنظیم مجدد رمز عبور کاربر در صورت فراموشی یا نیاز امنیتی|
|**نقش‌های مجاز (Actors)**||

- `Admin` (مدیر سیستم)
    
- `User` (کاربر خودش از طریق فراموشی رمز) |  
    | **پیش‌شرط‌ها (Preconditions)** |
    
- کاربر وجود داشته باشد
    
- ایمیل یا موبایل تأییدشده در پروفایل ذخیره شده باشد
    
- توکن اعتبارسنجی یا دسترسی مدیر برقرار باشد |  
    | **پس‌شرط‌ها (Postconditions)** |
    
- رمز عبور جدید برای کاربر تنظیم می‌شود
    
- توکن بازیابی باطل می‌شود
    
- در صورت انجام توسط کاربر، نوتیفیکیشن ارسال می‌شود |  
    | **سناریوهای اصلی (Main Flows)** |
    

**الف) توسط مدیر:**

1. مدیر وارد پنل مدیریت می‌شود
    
2. کاربر را انتخاب می‌کند
    
3. روی گزینه “Reset Password” کلیک می‌کند
    
4. رمز جدید وارد یا به‌صورت سیستمی تولید می‌شود
    
5. سیستم رمز جدید را ذخیره کرده و ایمیل اطلاع‌رسانی ارسال می‌کند
    

**ب) توسط خود کاربر (Forgot Password):**

1. کاربر وارد صفحه فراموشی رمز عبور می‌شود
    
2. ایمیل یا شماره موبایل خود را وارد می‌کند
    
3. یک کد یا لینک بازیابی دریافت می‌کند
    
4. وارد صفحه تنظیم رمز جدید می‌شود
    
5. رمز عبور جدید را تعیین می‌کند و عملیات نهایی می‌شود |
    

| **استثناها (Exceptions)** |

- کاربر نامعتبر یا غیرفعال
    
- ایمیل یا شماره موبایل ثبت‌نشده
    
- توکن بازیابی منقضی یا نامعتبر
    
- خطای سرور در ذخیره‌سازی رمز جدید |
    

| **الزامات رابط کاربری (UI Requirements)** |

- فرم ورود ایمیل/موبایل برای بازیابی
    
- تأیید هویت با OTP یا لینک
    
- فرم تعیین رمز جدید با اعتبارسنجی قوی
    
- در پنل مدیریت، امکان تولید رمز قوی و ارسال مستقیم |
    

| **ملاحظات امنیتی (Security Notes)** |

- توکن بازیابی زمان‌دار (مثلاً ۱۵ دقیقه اعتبار)
    
- ثبت لاگ عملیات
    
- اجباری‌بودن رمز قوی (شامل عدد، حروف و نمادها)
    
- هش رمز عبور با الگوریتم امن (مثل bcrypt یا Argon2)
    
- ارسال ایمیل یا پیامک پس از موفقیت عملیات جهت اطلاع‌رسانی کاربر |