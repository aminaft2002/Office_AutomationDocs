
### ✅ اطلاعات پایه

|ویژگی|مقدار|
|---|---|
|🎯 نام یوزکیس|BulkArchiveLetters|
|🧩 دامنه مرتبط|Letter|
|🎯 هدف|آرشیو کردن گروهی از نامه‌ها توسط کاربر با مجوز مناسب|
|👤 استفاده‌کننده|کاربران دارای دسترسی به نامه‌ها (کارمند، مدیر)|
|🔐 پیش‌نیاز دسترسی|کاربر باید دسترسی آرشیو برای هر نامه را داشته باشد|

---

### 📝 توضیح کلی

این یوزکیس به کاربر این امکان را می‌دهد که چندین نامه را به‌صورت هم‌زمان به وضعیت "آرشیوشده" منتقل کند. این قابلیت برای مدیریت سریع‌تر حجم زیادی از نامه‌های نهایی‌شده یا بی‌نیاز از اقدام مفید است.

---

### ✅ ورودی‌ها

|ورودی|نوع|توضیح|
|---|---|---|
|`UserId`|`Guid`|شناسه کاربر در حال انجام عملیات|
|`LetterIds`|`List<Guid>`|لیست شناسه نامه‌هایی که باید آرشیوشوند|

---

### 🎯 خروجی

|خروجی|نوع|توضیح|
|---|---|---|
|`ArchivedCount`|`int`|تعداد نامه‌هایی که با موفقیت آرشیوشدند|
|`FailedIds`|`List<Guid>`|شناسه‌ نامه‌هایی که به دلایلی مثل عدم دسترسی آرشیونشدند|

---

### 🧠 قوانین و شرط‌ها

- فقط نامه‌هایی که کاربر مجوز آرشیو آن‌ها را دارد تغییر وضعیت می‌دهند.
    
- نامه‌هایی که قبلاً آرشیوشده‌اند نادیده گرفته می‌شوند.
    
- نامه در صورتی قابل آرشیو است که در وضعیت نهایی (مثل Sent یا Finalized) باشد.
    
- برای هر نامه‌ای که عملیات روی آن انجام شود، لاگ ثبت خواهد شد (LogLetterAction).
    

---

### 🔗 ارتباط با سایر یوزکیس‌ها

- وابسته به: `CheckUserLetterPermission`
    
- مکمل با: `RestoreLetter`, `LogLetterAction`, `ArchiveLetter`
    
- مکمل UI: انتخاب چندگانه نامه‌ها و زدن دکمه "آرشیو گروهی"