### ✅ اطلاعات پایه

|ویژگی|مقدار|
|---|---|
|🎯 نام یوزکیس|RescheduleLetterSendTime|
|🧩 دامنه مرتبط|Letter|
|🎯 هدف|تغییر زمان ارسال نامه‌ای که برای آینده زمان‌بندی شده است|
|📦 نقش استفاده‌کننده|نویسنده نامه، مدیر سیستم، یا اپراتور مجاز|
|📅 وضعیت اجرا|فقط برای نامه‌هایی با وضعیت `ScheduledToSend`|
|🔐 مجوز مورد نیاز|CanScheduleLetterSend|

---

### 📝 توضیح کلی

این یوزکیس به کاربر اجازه می‌دهد زمان ارسال یک نامه زمان‌بندی‌شده را تغییر دهد، مشروط بر اینکه نامه هنوز ارسال نشده باشد.

---

### ✅ ورودی‌ها

|ورودی|نوع|توضیح|
|---|---|---|
|`LetterId`|`Guid`|شناسه نامه مورد نظر|
|`NewSendTime`|`DateTime`|زمان جدید برای ارسال نامه|
|`ModifiedByUserId`|`Guid`|شناسه کاربری که درخواست تغییر داده|
|`Reason` _(اختیاری)_|`string`|دلیل تغییر زمان (برای لاگ داخلی)|

---

### 🎯 خروجی

|خروجی|نوع|توضیح|
|---|---|---|
|`Success`|`bool`|آیا زمان با موفقیت تغییر کرد؟|
|`Message`|`string`|پیام نهایی برای کاربر یا ثبت در لاگ|
|`UpdatedScheduleTime`|`DateTime`|زمان جدید ثبت‌شده برای ارسال نامه|

---

### 🧠 شرط‌ها و قوانین

- فقط برای نامه‌هایی که در وضعیت `ScheduledToSend` هستند مجاز است.
    
- زمان جدید نباید در گذشته یا کمتر از ۵ دقیقه آینده باشد (برای اطمینان از پردازش).
    
- در صورت تغییر، یک رکورد در `LetterLog` ثبت می‌شود.
    
- کاربران بدون دسترسی نمی‌توانند زمان را تغییر دهند.
    
- اگر زمان ارسال جدید با تنظیمات سیستم (مثلاً ارسال شبانه) ناسازگار باشد، عملیات رد می‌شود.
    

---

### 🔗 ارتباط با سایر یوزکیس‌ها

- ✅ مکمل با: `ScheduleLetterForSend`, `CancelScheduledLetterSend`
    
- ✅ وابسته به: `RegisterLetter`, `ValidateLetterBeforeSend`
    
- ✅ باید با `LetterSchedulerService` هماهنگ شود (در بک‌اند)