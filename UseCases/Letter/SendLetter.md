

### ุงุฑุณุงู ุฑุณู ูุงูู ุงุฒ ุณู ฺฉุงุฑุจุฑ ุจู ฺฏุฑูุฏู/ฺฏุฑูุฏฺฏุงู ูุดุฎุต

---

### ๐ฏ ูุฏู:

ฺฉุงุฑุจุฑ ุจุชูุงูุฏ ูุงููโุง ฺฉู ูุจูุงู ุฏุฑ ุญุงูุช ูพุดโููุณ ุง ุฏุงุฎู ุจูุฏู ุฑุง ุจูโุตูุฑุช ุฑุณู ุงุฑุณุงู ฺฉูุฏ ู ุฑููุฏ ฺฏุฑุฏุด ูุงูู ุขุบุงุฒ ุดูุฏ.

---

### โ ุณูุงุฑููุง ฺฉุงุฑุจุฑุฏ

|ุณูุงุฑู|ุชูุถุญ|
|---|---|
|ุงุฑุณุงู ูุงูู ุตุงุฏุฑู ุจู ุณุงุฒูุงู ุฏฺฏุฑ|ููุฑุงู ุจุง ุดูุงุฑู ุฑุณู|
|ุงุฑุณุงู ูุงูู ุฏุงุฎู ุจู ูุงุญุฏ ุฏฺฏุฑ|ููุฑุงู ุจุง ุซุจุช ุฏุฑ ูุณุฑ ุงุฑุฌุงุน|
|ุชุบุฑ ูุถุนุช ูุงูู ุงุฒ "ูพุดโููุณ" ุจู "ุงุฑุณุงูโุดุฏู"|ู ุซุจุช ูุงฺฏ ู ุชุงุฑุฎฺู|

---

### ๐ฅ ูุฑูุฏโูุง (Input)

|ููุฏ|ููุน|ุงูุฒุงูุ|ุชูุถุญ|
|---|---|---|---|
|`LetterId`|`Guid`|โ|ุดูุงุณู ูุงููโุง ฺฉู ุจุงุฏ ุงุฑุณุงู ุดูุฏ|
|`SenderUserId`|`Guid`|โ|ุดูุงุณู ฺฉุงุฑุจุฑ ุงุฑุณุงูโฺฉููุฏู|
|`RoutingTargets`|`List<Guid>`|โ|ุดูุงุณู ฺฏุฑูุฏู/ฺฏุฑูุฏฺฏุงู ูุงูู (ููฺฉู ุงุณุช ูุงุญุฏ ุง ฺฉุงุฑุจุฑ ุจุงุดุฏ)|
|`SendAsDraftFinalized`|`bool`|โ|ุงฺฏุฑ ูุงูู ููุงโุดุฏู ุงูุง ูููุฒ ุงุฑุณุงู ูุดุฏู ุงุณุช|
|`IsResponseToLetter`|`bool`|โ|ุงฺฏุฑ ุงู ูุงูู ูพุงุณุฎ ุจู ูุงูู ูุจู ุจุงุดุฏุ ุจุงุฏ `ResponseToLetterId` ูพุฑ ุดูุฏ|

---

### โ๏ธ ูุฑุงุญู ุงุฌุฑุง

1. **ุจุฑุฑุณ ุงุนุชุจุงุฑ**:
    
    - ุขุง ฺฉุงุฑุจุฑ ุญู ุงุฑุณุงู ุงู ูุงูู ุฑุง ุฏุงุฑุฏุ
        
    - ุขุง ูุงูู ุฏุฑ ุญุงูุช Draft ุง Finalized ูู ุงุฑุณุงูโูุดุฏู ุงุณุชุ
        
2. **ุจูโุฑูุฒุฑุณุงู ูุถุนุช**:
    
    - ุชุบุฑ `Status` ุจู `Sent` ุง `InProgress`
        
    - ุซุจุช ุฒูุงู `SentDate`
        
3. **ุซุจุช ูุณุฑ ฺฏุฑุฏุด (Routing)**:
    
    - ุงุฌุงุฏ ุฑฺฉูุฑุฏูุง `LetterRouting` ุจุฑุง ูุฑ ฺฏุฑูุฏู
        
4. **ุจูโุฑูุฒุฑุณุงู ุณุงุจูู ูุดุงูุฏู ู ุงุนูุงูโูุง**:
    
    - ุฏุฑุฌ ุฑฺฉูุฑุฏ ุฏุฑ `LetterNotification` ุจุฑุง ฺฉุงุฑุจุฑุงู ููุตุฏ
        
5. **ุซุจุช ูุงฺฏ ุงูุฏุงู (LogLetterAction)**
    

---

### ๐ค ุฎุฑูุฌ (Output)

|ููุฏ|ููุน|ุชูุถุญ|
|---|---|---|
|`Success`|`bool`|ุขุง ุงุฑุณุงู ูููู ุจูุฏุ|
|`Message`|`string`|ูพุงู ููุงุณุจ ุจุฑุง ุฑุงุจุท ฺฉุงุฑุจุฑ|
|`RoutingIds`|`List<Guid>`|ุดูุงุณู ูุณุฑูุง ุงุฑุฌุงุน ุซุจุชโุดุฏู|
|`UpdatedStatus`|`enum`|ูุถุนุช ููุง ูุงูู (ุงุฑุณุงูโุดุฏู ุง ุฏุฑ ฺฏุฑุฏุด)|

---

### ๐ ูฺฉุงุช ููู

- ุงฺฏุฑ ฺฏุฑูุฏู ุณุงุฒูุงู ุฎุงุฑุฌ ุจุงุดุฏุ ููฺฉู ุงุณุช ูุงุฒ ุจู ุซุจุช `ExternalLetterNumber` ุจุงุดุฏ.
    
- ุงฺฏุฑ ูุงูู ูพุงุณุฎ ุจู ฺฉ ูุงูู ุฏฺฏุฑ ุจุงุดุฏุ ุจุงุฏ ุฑุงุจุทู `ResponseToLetterId` ุจุฑูุฑุงุฑ ุดูุฏ.
    
- ุซุจุช ุฏุฑ `LetterViewHistory` ุจุฑุง ฺฉุงุฑุจุฑ ุงุฌุงุฏฺฉููุฏู ูุงุฒู ูุณุช (ฺูู ุงุฑุณุงูโฺฉููุฏู ูุญุณูุจ ูโุดูุฏ).
    
- ูพุณ ุงุฒ ุงุฑุณุงูุ ุงูฺฉุงู ูุฑุงุด ุง ุญุฐู ูุงูู ูุฌูุฏ ูุฏุงุฑุฏ (ุงฺฏุฑ `IsFinalized == true`).
    
- ุงุฑุณุงู ุจู ฺูุฏ ฺฏุฑูุฏู ุจุงุฏ ุจู ุตูุฑุช ููุงุฒ ุฏุฑ ฺฏุฑุฏุด ุซุจุช ุดูุฏ.