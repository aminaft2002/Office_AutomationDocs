
### ๐ Use Case: DuplicateLetter

|ูฺฺฏ|ููุฏุงุฑ|
|---|---|
|**ูุงู ูุฒฺฉุณ**|DuplicateLetter|
|**ูุฏู**|ุงุฌุงุฏ ฺฉ ฺฉูพ ุงุฒ ฺฉ ูุงูู ููุฌูุฏ ุจุฑุง ุงุณุชูุงุฏู ูุฌุฏุฏ (ูุซูุงู ุฌูุช ุงุฑุณุงู ูุดุงุจูุ ุง ุงูฺฏูฺฏุฑ ุงุฒ ูุงูู ูุจู)|
|**Actor**|ฺฉุงุฑุจุฑ ุฏุงุฑุง ุฏุณุชุฑุณ ุจู ูุงูู ุงููู|
|**Trigger**|ฺฉุงุฑุจุฑ ุฑู ฺฏุฒูู "ุงุฌุงุฏ ฺฉูพ" ุง "Duplicate" ุฏุฑ ุตูุญู ุฌุฒุฆุงุช ูุงูู ฺฉูฺฉ ูโฺฉูุฏ|

---

### ๐งฉ Preconditions (ูพุดโูุงุฒูุง):

- ูุงููโุง ุจุง `LetterId` ูุดุฎุต ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ.
    
- ฺฉุงุฑุจุฑ ุฏุณุชุฑุณ ูุดุงูุฏู ู ุงุฌุงุฏ ูุงูู ุฌุฏุฏ ุฏุงุดุชู ุจุงุดุฏ.
    

---

### โ๏ธ Main Flow (ุฑููุฏ ุงุตู):

1. ฺฉุงุฑุจุฑ ุฏุฑุฎูุงุณุช ุงุฌุงุฏ ฺฉูพ ุงุฒ ฺฉ ูุงูู ุฎุงุต ุฑุง ุงุฑุณุงู ูโฺฉูุฏ.
    
2. ุณุณุชู ุตุญุช ูุฌูุฏ ูุงูู ุงููู ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.
    
3. ูุญุชูุงุช ูุงูู (ุดุงูู ููุถูุนุ ูุชูุ ูพูุณุชโูุงุ ุชฺฏโูุง ู ุณุงุฑ ููุฏูุง ุงูุชุฎุงุจโุดุฏู) ุฎูุงูุฏู ูโุดูุฏ.
    
4. ฺฉ ูุงูู ุฌุฏุฏ ุงุฒ ููุน `Draft` ุจุง ุงุทูุงุนุงุช ูุดุงุจู ุณุงุฎุชู ูโุดูุฏ:
    
    - ุดูุงุณู ุฌุฏุฏ
        
    - ูุถุนุช: ูพุดโููุณ (`Draft`)
        
    - ุดูุงุฑู ูุงูู: ุฎุงู ุง ุฏุฑ ุงูุชุธุงุฑ ุชููุฏ ุฎูุฏฺฉุงุฑ
        
    - ุชุงุฑุฎ ุซุจุช ุฌุฏุฏ
        
    - ุงุฌุงุฏฺฉููุฏู = ฺฉุงุฑุจุฑ ูุนู
        
    - ูพูุณุชโูุง ู ุชฺฏโูุง ุจูโุตูุฑุช ุงุฎุชุงุฑ ฺฉูพ ุดููุฏ
        
5. ุดูุงุณู ูุงูู ุฌุฏุฏ ุจู ุนููุงู ูพุงุณุฎ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.
    

---

### ๐ Alternative Flow (ุฑููุฏ ุฌุงฺฏุฒู):

|ุดูุงุฑู|ุดุฑุท|ุฑููุฏ ุฌุงฺฏุฒู|
|---|---|---|
|A1|ูุงูู ูพุฏุง ูุดุฏ|ุฎุทุง `404 - Letter Not Found` ููุงุด ุฏุงุฏู ุดูุฏ|
|A2|ฺฉุงุฑุจุฑ ูุฌุงุฒ ุจู ูุดุงูุฏู ุง ุงุฌุงุฏ ูุงูู ูุณุช|ุฎุทุง `403 - Access Denied` ููุงุด ุฏุงุฏู ุดูุฏ|

---

### ๐ฆ Output (ุฎุฑูุฌ):

{
  "newLetterId": "uuid",
  "status": "Draft"
}

### โ๏ธ ฺฏุฒููโูุง ูุงุจู ุชูุธู:

|ฺฏุฒูู|ุชูุถุญ|
|---|---|
|`IncludeAttachments`|ุขุง ูพูุณุชโูุง ูุฒ ฺฉูพ ุดููุฏุ (ูพุดโูุฑุถ: false)|
|`IncludeTags`|ุขุง ุชฺฏโูุง ูุฒ ููุชูู ุดููุฏุ (ูพุดโูุฑุถ: false)|
|`IncludeRouting`|ุขุง ุงุฑุฌุงุนุงุช ูุฒ ฺฉูพ ุดููุฏุ (ูพุดโูุฑุถ: false)|
|`ResetFields`|ููุฏูุง ฺฉู ุจุงุฏ ุฑุณุช ุดููุฏ: `LetterNumber`, `LetterDate`, `ExternalNumber`, ...|

---

### ๐ก๏ธ ูฺฉุงุช ุงููุช:

- ุชููุง ฺฉุงุฑุจุฑุงู ุฏุงุฑุง ุณุทุญ ุฏุณุชุฑุณ ููุงุณุจ ุจู `Letter` ู ูุงุจูุช ุงุฌุงุฏ `Draft` ุฌุฏุฏ ูุฌุงุฒ ูุณุชูุฏ.
    
- ุดูุงุฑู ูุงูู ุฏุฑ ุญุงูุช ูพุดโููุณ ุฎุงู ูฺฏู ุฏุงุดุชู ูโุดูุฏ ุชุง ุฏุฑ ุฒูุงู ุงุฑุณุงู ุชููุฏ ุดูุฏ.
    

---

### ๐ ูุงุจุณุชฺฏโูุง:

- Entity: `Letter`
    
- Optional: `LetterAttachment`, `LetterTag`, `LetterRouting`
    
- Permission Check: `CanViewLetter`, `CanCreateLetter`