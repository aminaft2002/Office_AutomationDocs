
### ✅ اطلاعات پایه

|ویژگی|مقدار|
|---|---|
|🎯 نام یوزکیس|SetLetterColorLabel|
|🧩 دامنه مرتبط|Letter|
|🎯 هدف|تنظیم یک رنگ برچسبی (Label Color) برای نامه، برای دسته‌بندی یا اولویت‌بندی در رابط کاربری|
|👤 استفاده‌کننده|کاربر دریافت‌کننده یا صاحب نامه|
|🔐 پیش‌نیاز دسترسی|مشاهده و ویرایش نامه (حداقل دسترسی شخصی روی آن نامه)|

---

### 📝 توضیح کلی

رنگ‌گذاری بر روی نامه‌ها یک ویژگی رابط کاربری است که به کاربر کمک می‌کند نامه‌ها را به‌صورت دیداری دسته‌بندی یا علامت‌گذاری کند (مثلاً «قرمز» برای فوری، «آبی» برای پیگیری، «سبز» برای انجام‌شده و...).

---

### ✅ ورودی‌ها

|ورودی|نوع|توضیح|
|---|---|---|
|`LetterId`|`Guid`|شناسه نامه موردنظر|
|`UserId`|`Guid`|شناسه کاربری که رنگ را تنظیم می‌کند|
|`ColorLabel`|`string`|نام رنگ یا کد Hex مثل `#FF0000` یا `red` یا enum داخلی (`Urgent`, `Normal`, `Done`)|

---

### 🎯 خروجی

|خروجی|نوع|توضیح|
|---|---|---|
|`Success`|`bool`|نتیجه عملیات|
|`Message`|`string`|پیام وضعیت (مثلاً «رنگ نامه با موفقیت تنظیم شد»)|

---

### 🧠 قوانین و شرط‌ها

- رنگ‌گذاری در سطح کاربر-نامه ذخیره می‌شود (یعنی هر کاربر ممکن است یک رنگ جداگانه برای یک نامه مشخص تنظیم کرده باشد).
    
- اگر مقدار جدیدی ثبت شود، مقدار قبلی بازنویسی می‌شود.
    
- اگر رنگ حذف شود، مقدار `null` در نظر گرفته می‌شود.
    
- رنگ می‌تواند از یک لیست از پیش تعریف‌شده یا به‌صورت آزاد باشد (بسته به سیاست سیستم).
    

---

### 🔧 مکانیزم پیشنهادی

- جدول واسط `LetterUserSettings` یا مشابه:
    
    - `LetterId`
        
    - `UserId`
        
    - `ColorLabel` (nullable)
        
    - سایر تنظیمات نمایشی (مثل پین بودن، اولویت، نمایش در داشبورد و...)
        
- اگر رکورد وجود ندارد → ایجاد
    
- اگر وجود دارد → به‌روزرسانی
    

---

### 🔗 ارتباط با سایر یوزکیس‌ها

- `PinLetterToDashboard`
    
- `MarkLetterAsImportant`
    
- `GroupLetterByTag`
    
- `SearchLetters`