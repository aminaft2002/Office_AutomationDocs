### 📄 Use Case: GetLetterNoteHistory

|ویژگی|مقدار|
|---|---|
|**نام یوزکیس**|GetLetterNoteHistory|
|**هدف**|بازیابی و نمایش تاریخچه تمامی یادداشت‌ها (Notes) مرتبط با یک نامه خاص شامل یادداشت‌های فعال و حذف‌شده|
|**Actor**|کاربر دارای دسترسی مشاهده نامه|
|**Trigger**|کاربر در صفحه جزئیات یک نامه روی بخش "یادداشت‌ها" کلیک می‌کند یا درخواست مشاهده تاریخچه یادداشت‌ها را می‌دهد|

---

### 🧩 Preconditions (پیش‌نیازها):

- کاربر باید دسترسی مشاهده آن نامه را داشته باشد.
    
- نامه مورد نظر باید در سیستم وجود داشته باشد.
    

---

### ⚙️ Main Flow (روند اصلی):

1. سیستم شناسه نامه را دریافت می‌کند.
    
2. سیستم تمام یادداشت‌های مرتبط با نامه را (اعم از فعال و Soft-Deleted) از موجودیت `LetterNote` استخراج می‌کند.
    
3. نتایج مرتب‌شده بر اساس `CreatedAt` یا `UpdatedAt` به کاربر نمایش داده می‌شود.
    
4. اگر یادداشتی قبلاً Soft Deleted شده باشد، در خروجی نیز این وضعیت نمایش داده می‌شود (مثلاً با فیلد `IsDeleted: true`).
    

---

### 🔄 Alternative Flow (روند جایگزین):

|شماره|شرط|روند جایگزین|
|---|---|---|
|A1|نامه‌ای با آن شناسه وجود ندارد|خطای 404 (Letter Not Found) نمایش داده می‌شود|
|A2|کاربر مجاز به مشاهده نامه نیست|خطای 403 (Access Denied) نمایش داده می‌شود|

---

### 📦 Output (خروجی):
[
  {
    "noteId": "guid",
    "letterId": "guid",
    "content": "string",
    "createdBy": {
      "userId": "guid",
      "name": "string"
    },
    "createdAt": "datetime",
    "updatedAt": "datetime",
    "isDeleted": true/false
  },
  ...
]


### 📚 وابستگی‌ها:

- Entity: `LetterNote`
    
- Relation: `Letter 1:N LetterNote`