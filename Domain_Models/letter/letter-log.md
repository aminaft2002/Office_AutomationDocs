| نام فیلد    | نوع داده          | الزامی؟ | توضیحات                                                                |
| ----------- | ----------------- | ------- | ---------------------------------------------------------------------- |
| `id`        | Integer (PK)      | ✅       | شناسه یکتا برای لاگ                                                    |
| `letterId`  | FK (Letter)       | ✅       | ارتباط با نامه‌ای که این لاگ مربوط به آن است                           |
| `action`    | Enum              | ✅       | نوع عملیات: Created, Edited, Sent, Viewed, Deleted, Forwarded, Replied |
| `actorId`   | FK (User)         | ✅       | شناسه کاربر انجام‌دهنده این عمل                                        |
| `actorRole` | String / Enum     | ❌       | نقش کاربر در زمان انجام عملیات (اختیاری)                               |
| `timestamp` | DateTime          | ✅       | زمان دقیق انجام عملیات                                                 |
| `note`      | String (nullable) | ❌       | توضیح تکمیلی یا پیام همراه عملیات                                      |
| `ipAddress` | String            | ❌       | در صورت نیاز به ثبت امنیتی (از طریق پنل یا API یا دستگاه خاص)          |


| فیلد           | نوع داده              | توضیح                                                              |
| -------------- | --------------------- | ------------------------------------------------------------------ |
| `Id`           | `Guid`                | شناسه یکتا                                                         |
| `LetterId`     | `Guid`                | ارجاع به نامه                                                      |
| `Action`       | `LetterAction` (enum) | نوع عملیات انجام‌شده (ایجاد، ویرایش، ارجاع، پاسخ، مشاهده و ...)    |
| `PerformedBy`  | `Guid`                | کاربر انجام‌دهنده عملیات                                           |
| `PerformedAt`  | `DateTime`            | زمان انجام عملیات                                                  |
| `Description`  | `string?`             | توضیحات تکمیلی درباره رخداد                                        |
| `MetaDataJson` | `string?`             | داده‌های اضافی (در قالب JSON)، مثلاً IP، نقش کاربر، اطلاعات دستگاه |
| `CreatedAt`    | `DateTime`            | زمان ثبت رخداد                                                     |
| `CreatedBy`    | `Guid?`               | کاربر یا سیستم ایجادکننده (معمولاً برابر با PerformedBy)           |

### 🔗 روابط

|رابطه|نوع ارتباط|توضیح|
|---|---|---|
|`LetterLog → Letter`|N:1|ارتباط با نامه|
|`LetterLog → User`|N:1|کاربر انجام‌دهنده عملیات|

### ✅ نکات طراحی

- در طراحی سیستم‌هایی با قابلیت **Audit Log**، وجود چنین مدلی ضروری است.
    
- قابلیت فیلتر، جست‌وجو، مرتب‌سازی و استخراج گزارش از رخدادهای خاص (مثلاً همه نامه‌های مشاهده‌شده ولی بدون پاسخ).
    
- در صورت نیاز، می‌توان **نقش کاربر** (Role) را نیز در `MetaDataJson` ذخیره کرد.
    
- در سطوح حساس می‌توان **IP Address** یا **موقعیت جغرافیایی** را ذخیره کرد.
مقادیر پیشنهادی برای فیلد `action`:
public enum LetterLogAction {
    Created,
    Edited,
    Deleted,
    Sent,
    Received,
    Viewed,
    Replied,
    Forwarded,
    Approved,
    Rejected,
    Printed,
    Exported,
    Archived
}

