

### 🎯 هدف:

مدیریت اعلان‌ها و اطلاع‌رسانی‌های مربوط به نامه‌ها برای کاربران مختلف. هر زمان که یک کاربر نیاز است در جریان تغییر یا ایجاد یک نامه قرار بگیرد (مثل ارجاع، ارسال، پاسخ جدید، تغییر وضعیت)، یک اعلان برای او ثبت می‌شود.

---

### 🧱 ساختار مدل

|فیلد|نوع داده|کلید|توضیح|
|---|---|---|---|
|`Id`|`Guid`|Primary Key|شناسه یکتا|
|`LetterId`|`Guid`|Foreign Key → Letter.Id|ارجاع به نامه مربوطه|
|`UserId`|`Guid`|Foreign Key → User.Id|کاربری که باید نوتیفیکیشن دریافت کند|
|`NotificationType`|`enum`||نوع اعلان (ارجاع، پاسخ، تغییر وضعیت و ...)|
|`IsRead`|`bool`||آیا اعلان دیده شده؟|
|`CreatedAt`|`DateTime`||زمان ایجاد|

---

### 🔁 روابط

- `LetterNotification → Letter` (N:1)
    
- `LetterNotification → User` (N:1)
    

---

enum NotificationType {
  Referred,
  Responded,
  Forwarded,
  StatusChanged,
  Assigned,
  Mentioned,
  NewComment
}

---

### 🧩 نکات طراحی

- ممکن است برای هر نامه، چند اعلان برای کاربران مختلف ثبت شود.
    
- در صورت اتصال به سیستم اعلان آنی (Real-time)، می‌توان این موجودیت را به WebSocket یا SignalR متصل کرد.
    
- این جدول صرفاً برای ردیابی وضعیت دیده شدن پیام در UI است و در سطح سرور به‌عنوان گزارش استفاده نمی‌شود.


### ✅ نکات طراحی

- **بهینه‌سازی خواندن اعلان‌ها**: پیشنهاد می‌شود برای عملکرد بهتر، ستون `IsRead` با ایندکس طراحی شود.
    
- **نمایش در UI**: فیلد `Type` کمک می‌کند تا آیکون و رنگ متفاوت برای هر نوع اعلان در UI نمایش داده شود.
    
- **پشتیبانی از WebSocket**: این مدل می‌تواند منبع Push Notification در سیستم‌های بلادرنگ باشد.