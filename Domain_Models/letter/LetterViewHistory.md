
### 🎯 هدف

این موجودیت، سابقه‌ای از مشاهده هر نامه توسط کاربران مختلف را نگهداری می‌کند. این قابلیت در گزارش‌گیری، بررسی تعاملات کاربران، امنیت، و اطلاع‌رسانی استفاده می‌شود.

---

### 🧱 فیلدهای اصلی

|فیلد|نوع داده|توضیح|
|---|---|---|
|`Id`|`Guid`|شناسه یکتا|
|`LetterId`|`Guid`|ارجاع به نامه مورد نظر|
|`UserId`|`Guid`|کاربری که نامه را مشاهده کرده|
|`ViewedAt`|`DateTime`|زمان دقیق مشاهده|
|`IpAddress`|`string?`|آدرس IP کاربر در زمان مشاهده (در صورت ثبت)|
|`DeviceInfo`|`string?`|اطلاعات دستگاه یا مرورگر (User-Agent)|
|`CreatedAt`|`DateTime`|زمان ثبت|
|`CreatedBy`|`Guid?`|فرآیند یا کاربر ایجادکننده (معمولاً سیستمی)|

### 🔗 روابط

|رابطه|نوع ارتباط|توضیح|
|---|---|---|
|`LetterViewHistory → Letter`|N:1|نامه‌ای که بازدید شده|
|`LetterViewHistory → User`|N:1|کاربر بازدیدکننده|

---

### ✅ نکات طراحی

- **ثبت برای اهداف امنیتی**: می‌توان از این داده‌ها برای بررسی دسترسی‌های مشکوک یا تحلیل رفتار کاربران استفاده کرد.
    
- **تحلیل آماری**: بررسی میزان بازدید هر نامه توسط کاربران مختلف (مثلاً برای نمایش پر‌مخاطب‌ترین نامه‌ها یا اطلاع از عدم مشاهده نامه‌ها توسط برخی).
    
- **پشتیبانی از Audit**: قابل استفاده در پنل مدیریتی برای گزارش‌گیری.
    

---

### 📌 استفاده‌های معمول

- نمایش تعداد بازدیدها در UI.
    
- اطلاع مدیر سیستم از عدم بازدید توسط کاربران خاص.
    
- بررسی ثبت‌نامت‌ها در سازمان‌های بزرگ و جلوگیری از نادیده گرفته شدن نامه‌ها.